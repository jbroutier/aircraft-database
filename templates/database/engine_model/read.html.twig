{% extends '_layouts/default.html.twig' %}

{% block title %}{{ engineModel.manufacturer is not null ? engineModel.manufacturer.name }} {{ engineModel.name }} - {{ parent() }}{% endblock %}
{% block description %}{{ '%manufacturer% %name% technical data: Dimensions, weight, rotation speed, power,â€¦'|trans({
  '%manufacturer%': engineModel.manufacturer is not null ? engineModel.manufacturer.name,
  '%name%': engineModel.name
}) }}{% endblock %}

{% block images %}
  {% for picture in engineModel.pictures %}
    <meta property="og:image"
          content="{{ absolute_url(asset('pictures/' ~ picture)|imagine_filter('thumbnail_1200x630')) }}">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    {% if picture.description is not null %}
      <meta property="og:image:alt" content="{{ picture.description|escape('html_attr') }}">
    {% endif %}

  {% endfor %}
{% endblock %}

{% block content %}
  <div class="card position-relative">

    {% if engineModel.pictures|length %}
      {% include '_partials/carousel.html.twig' with { pictures: engineModel.pictures } %}
    {% else %}
      <img class="img-fluid" src="{{ asset('assets/images/no-picture-1400x800.webp') }}"
           width="1400" height="800" alt="">
    {% endif %}

    {% include '_partials/tags.html.twig' with { tags: engineModel.tags } %}

  </div>
  <div class="card card-body">
    <div class="d-flex justify-content-between gap-3">
      <div>
        <h1>{{ engineModel.name }}</h1>
        <div class="table-responsive">
          <table class="table mb-0">

            {% if engineModel.manufacturer is not null %}
              <tr>
                <th scope="row" class="col-auto">{{ 'Manufacturer:'|trans }}</th>
                <td class="col-auto">

                  {% if engineModel.manufacturer.country is not null %}
                    <span data-bs-toggle="tooltip"
                          title="{{ engineModel.manufacturer.country|country_name|escape('html_attr') }}">
                      <span class="fp {{ engineModel.manufacturer.country|lower }} me-2"></span>
                    </span>
                  {% else %}
                    <span data-bs-toggle="tooltip" title="{{ 'International'|trans }}">
                      <span class="fp intl me-2"></span>
                    </span>
                  {% endif %}

                  <a href="{{ path('database_manufacturer_read', { slug: engineModel.manufacturer.slug }) }}">
                    {{ engineModel.manufacturer.name }}
                  </a>
                </td>
              </tr>
            {% endif %}

          </table>
        </div>
      </div>

      {% if engineModel.manufacturer is not null and engineModel.manufacturer.logo is not null %}
        <div class="logo-container-lg">
          <img src="{{ asset('logos/' ~ engineModel.manufacturer.logo) }}" alt="">
        </div>
      {% endif %}

    </div>

    {% if engineModel.content is not null %}
      <div class="card-content">
        {{ engineModel.content|markdown_to_html }}
      </div>
    {% endif %}

  </div>
  <div class="d-flex flex-column gap-3">

    {% include '_partials/properties.html.twig' with {
      propertyGroups: engineModel.propertyGroups,
      propertyValues: engineModel.propertyValues
    } %}
    {% include '_partials/database/aircraft_types.html.twig' %}
    {% include '_partials/database/aircraft_models.html.twig' %}

  </div>
{% endblock %}
