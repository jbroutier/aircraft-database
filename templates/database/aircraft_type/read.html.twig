{% extends '_layouts/default.html.twig' %}

{% block title %}{{ aircraftType.manufacturer is not null ? aircraftType.manufacturer.name }} {{ aircraftType.name }} - {{ parent() }}{% endblock %}
{% block description %}{{ 'Technical data on %manufacturer% %name%: Dimensions, weight, range, performance,â€¦'|trans({
  '%manufacturer%': aircraftType.manufacturer is not null ? aircraftType.manufacturer.name,
  '%name%': aircraftType.name
}) }}{% endblock %}

{% block images %}
  {% for picture in aircraftType.pictures %}
    <meta property="og:image"
          content="{{ absolute_url(asset('pictures/' ~ picture)|imagine_filter('thumbnail_1200x1200')) }}">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="1200">

    {% if picture.description is not null %}
      <meta property="og:image:alt" content="{{ picture.description|escape('html_attr') }}">
    {% endif %}

  {% endfor %}
{% endblock %}

{% block content %}
  <div class="card position-relative">

    {% if aircraftType.pictures|length %}
      {% include '_partials/carousel.html.twig' with { pictures: aircraftType.pictures } %}
    {% else %}
      <img class="img-fluid" src="{{ asset('assets/images/no-picture-1400x800.webp') }}"
           width="1400" height="800" alt="">
    {% endif %}

    {% include '_partials/tags.html.twig' with { tags: aircraftType.tags } %}

  </div>
  <div class="card card-body">
    <div class="d-flex justify-content-between gap-3">
      <div>
        <h1 class="card-title">{{ aircraftType.name }}</h1>
        <div class="table-responsive">
          <table class="table mb-0">

            {% if aircraftType.manufacturer is not null %}
              <tr>
                <th scope="row" class="col-1">{{ 'Manufacturer:'|trans }}</th>
                <td class="col-auto">

                  {% if aircraftType.manufacturer.country is not null %}
                    <span data-bs-toggle="tooltip"
                          title="{{ aircraftType.manufacturer.country|country_name|escape('html_attr') }}">
                      <span class="fp {{ aircraftType.manufacturer.country|lower }} me-2"></span>
                    </span>
                  {% else %}
                    <span data-bs-toggle="tooltip" title="{{ 'International'|trans }}">
                      <span class="fp intl me-2"></span>
                    </span>
                  {% endif %}

                  <a href="{{ path('database_manufacturer_read', { slug: aircraftType.manufacturer.slug }) }}">
                    {{ aircraftType.manufacturer.name }}
                  </a>
                </td>
              </tr>
            {% endif %}

            {% if aircraftType.icaoCode is not null %}
              <tr>
                <th scope="row" class="col-1">{{ 'ICAO code:'|trans }}</th>
                <td class="col-auto">
                  <a href="{{ path('database_aircraft_type_list', { filters: { icaoCode: aircraftType.icaoCode } }) }}">
                    {{ aircraftType.icaoCode }}
                  </a>
                </td>
              </tr>
            {% endif %}

            {% if aircraftType.iataCode is not null %}
              <tr>
                <th scope="row" class="col-1">{{ 'IATA code:'|trans }}</th>
                <td class="col-auto">
                  <a href="{{ path('database_aircraft_type_list', { filters: { iataCode: aircraftType.iataCode } }) }}">
                    {{ aircraftType.iataCode }}
                  </a>
                </td>
              </tr>
            {% endif %}

          </table>
        </div>
      </div>

      {% if aircraftType.manufacturer is not null and aircraftType.manufacturer.logo is not null %}
        <div class="logo-container-lg">
          <img src="{{ asset('logos/' ~ aircraftType.manufacturer.logo) }}" alt="">
        </div>
      {% endif %}

    </div>

    {% if aircraftType.content is not null %}
      <div class="card-content">
        {{ aircraftType.content|markdown_to_html }}
      </div>
    {% endif %}

  </div>
  <div class="d-flex flex-column gap-3">

    {% include '_partials/properties.html.twig' with {
      propertyGroups: aircraftType.propertyGroups,
      propertyValues: aircraftType.propertyValues
    } %}
    {% include '_partials/database/aircraft_models.html.twig' %}
    {% include '_partials/database/engine_models.html.twig' %}

  </div>
{% endblock %}
